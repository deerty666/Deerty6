<!DOCTYPE html><html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ù†Ø¸Ø§Ù… Ù…Ø®Ø²ÙˆÙ† Ù…Ø·Ø¹Ù… â€“ ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
body{font-family:Cairo,sans-serif;background:#f4f4f4;margin:0;padding:15px}
h1{margin-bottom:12px}
.card{background:#fff;border-radius:14px;padding:12px;margin-bottom:10px;box-shadow:0 4px 10px rgba(0,0,0,.08)}
.off{opacity:.45}
.row{display:flex;justify-content:space-between;align-items:center;gap:8px;flex-wrap:wrap}
button{border:0;border-radius:8px;padding:6px 12px;cursor:pointer}
.green{background:#2ecc71;color:#fff}
.red{background:#e74c3c;color:#fff}
.gray{background:#7f8c8d;color:#fff}
input{width:70px;padding:6px;border-radius:6px;border:1px solid #ccc;text-align:center}
.admin-only{display:none}
.login{margin-bottom:15px}
.login input{width:100%;margin-bottom:8px}
</style>
</head>
<body>
<h1>ğŸ“¦ Ù†Ø¸Ø§Ù… Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ù…Ø·Ø¹Ù…</h1><!-- ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ --><div class="login" id="loginBox">
  <input id="email" placeholder="Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„">
  <input id="password" type="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±">
  <button class="gray" onclick="login()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
</div><div id="items"></div><script type="module">
/************************************************
 * 1) Ø¥Ø¹Ø¯Ø§Ø¯ Firebase â€“ Ø¹Ø¯Ù„ Ø§Ù„Ù‚ÙŠÙ… ÙÙ‚Ø·
 ************************************************/
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, onSnapshot, doc, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
import { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "PUT_API_KEY_HERE",
  authDomain: "PUT_AUTH_DOMAIN_HERE",
  projectId: "PUT_PROJECT_ID_HERE"
};

/************************************************
 * 2) ØªÙ‡ÙŠØ¦Ø© Firebase
 ************************************************/
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const auth = getAuth(app);

// Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ù„Ù‡ Ø¨Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ ÙÙ‚Ø·
const ADMIN_EMAIL = "admin@restaurant.com";

/************************************************
 * 3) Ø¹Ø±Ø¶ Ø§Ù„Ø£ØµÙ†Ø§Ù Ø¨ØªØ­Ø¯ÙŠØ« ÙÙˆØ±ÙŠ
 ************************************************/
const list = document.getElementById('items');

onSnapshot(collection(db,'items'), snap => {
 list.innerHTML='';
 snap.forEach(d=>{
  const i=d.data();
  const div=document.createElement('div');
  div.className='card'+(i.active?'':' off');
  div.innerHTML=`
   <div class="row">
    <strong>${i.name}</strong>
    <span>Ø§Ù„ÙƒÙ…ÙŠØ©: ${i.qty}</span>
   </div>
   <div class="row admin-only">
    <input type="number" value="${i.qty}" min="0" id="q_${d.id}">
    <button class="gray" onclick="updateQty('${d.id}')">ØªØ­Ø¯ÙŠØ«</button>
    <button class="${i.active?'red':'green'}" onclick="toggle('${d.id}',${i.active})">${i.active?'Ø¥ÙŠÙ‚Ø§Ù':'ØªØ´ØºÙŠÙ„'}</button>
   </div>`;
  list.appendChild(div);
 })
})

/************************************************
 * 4) ØµÙ„Ø§Ø­ÙŠØ§Øª Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„
 ************************************************/
onAuthStateChanged(auth,user=>{
 if(user && user.email===ADMIN_EMAIL){
  document.getElementById('loginBox').style.display='none';
  document.querySelectorAll('.admin-only').forEach(e=>e.style.display='flex');
 }
})

/************************************************
 * 5) ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ (Ù„Ù„Ù…Ø³Ø¤ÙˆÙ„ ÙÙ‚Ø·)
 ************************************************/
window.updateQty = async(id)=>{
 const v=document.getElementById('q_'+id).value;
 await updateDoc(doc(db,'items',id),{qty:Number(v),active:v>0});
}

window.toggle = async(id,state)=>{
 await updateDoc(doc(db,'items',id),{active:!state});
}

window.login = ()=>{
 const email=document.getElementById('email').value;
 const pass=document.getElementById('password').value;
 signInWithEmailAndPassword(auth,email,pass);
}

/************************************************
 * 6) Ø§Ù„Ø£ØµÙ†Ø§Ù (ØªÙØ¶Ø§Ù Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø© Ø¯Ø§Ø®Ù„ Firestore)
 * Ø´ÙˆØ§ÙŠØ© â€“ Ù…Ø¶Ø¨ÙŠ â€“ Ù…Ù†Ø¯ÙŠ â€“ Ù…Ø¸ØºÙˆØ· â€“ Ù…Ù‚Ù„ÙˆØ¨Ø© â€“ Ù…Ø¯ÙÙˆÙ†
 * Ù„Ø­Ù… Ù…Ù†Ø¯ÙŠ (ÙƒØ§Ù…Ù„/Ù†Øµ/Ø±Ø¨Ø¹/Ù†ÙØ±)
 * Ù„Ø­Ù… Ø­Ø§Ø´ÙŠ â€“ Ù„Ø­Ù… Ø¨Ø±Ù…Ø©
 * Ø±Ø² Ø´Ø¹Ø¨ÙŠ â€“ Ø±Ø² Ø¨Ø´Ø§ÙˆØ± â€“ Ø±Ø² Ù…Ù†Ø¯ÙŠ
 * Ø¬Ø±ÙŠØ´ â€“ Ù‚Ø±ØµØ§Ù†
 ************************************************/
</script></body>
</html>
